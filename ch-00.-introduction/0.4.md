# 0.4 의존성 역전 원칙

많은 사람들은 아마 SOLID의 D인 의존성 역전 원칙(Dependency Inversion Principle)에 익숙할 것입니다. DIP의 엄밀한 정의는 다음과 같습니다.

* 고수준 모듈(high-level module)은 저수준 모듈(low-level module)에 의존해서는 안 됩니다. 두 모듈 모두 추상화에 의존해야합니다.
* 추상화는 세부 사항에 의존해서는 안 됩니다. 반대로 세부 사항은 추상화에 의존해야 합니다.



참고로 고수준 모듈은 조직에서 정말 중요하게 여기는 코드를 의미합니다. 제약 회사에 근무한다면 고수준 모듈은 환자와 임상시험을 관리합니다. 은행에서 근무한다면 고수준 모듈은 거래나 외환을 관리합니다.

* 고수준 모듈은 실세계의 개념을 처리하는 함수, 클래스, 패키지를 말합니다.



반대로 저수준 모듈은 조직에서 신경 쓰지 않는 코드입니다. 예를 들어 HR(Human Resource) 부서가 파일 시스템이나 네트워크 소켓에 관심을 갖을 가능성이 낮습니다.&#x20;

* 즉 고수준의 개념이 정상으로 작동되는지만 신경씁니다.&#x20;



의존성은 꼭 import나 call만을 뜻하지 않습니다. 대신 한 모듈이 다른 모듈을 필요로 하거나, 알고있다는 것이 좀더 일반적인 생각이 의존성입니다.&#x20;



DIP의 첫 부분은 비즈니스 코드가 기술적인 세부 사항에 의존해서는 안 된다는 의미입니다. 대신 양 쪽 모두 추상화를 사용해야 합니다.&#x20;

* 왜 그런 것이냐면 서로를 독립적으로 변경하길 원하기 때문입니다.&#x20;
* 고수준 모듈은 비즈니스의 필요에 따라 쉽게 변경이 가능해야 합니다.
* 반면 저수준 모듈은 (또는 그 세부 사항은) 실제로 변경하기 어렵습니다.&#x20;



1. 즉, 비즈니스 로직이 저수준 인프라의 세부 사항과 밀접하게 연결돼서 변경이 어려워지는 일을 막아야 합니다.&#x20;
2. 마찬가지로 인프라 세부 사항을 변경할 필요가 있을 때(예를 들어 Database Sharding과 같이) 비즈니스 계층을 변경하지 않고도 인프라 세부 사항을 바꿀 수 있어야 한다는 점도 중요합니다.

* 이 둘 사이의 추상화(유명한 extra layer of indirection)를 사용하면 두 계층이 서로 (더 많이) 독립적으로 변경될 수 있습니다.



그런데, 첫 번째 부분에서 "추상화는 세부 사항에 의존해서는 안 된다"라는 말은 충분히 명확해 보이지만, 두 번째 부분에서 "세부 사항은 추상화에 의존해야 한다"는 상상하기 어렵습니다.&#x20;

* 어떻게 자신이 추상화하는 세부 사항에 의존하지 않는 추상화가 가능할까요? Chapter 04에서 조금 더 자세히 알아봅시다.&#x20;



출처: [Architecture Patterns with Python](https://github.com/cosmicpython/book/blob/master/introduction.asciidoc)
